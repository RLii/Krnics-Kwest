<script src="phaser.min.js"></script>
<script src="phaser.js"></script>
<script>
/*CTRL-SHIFT-I activates opera's development tools*/
/*http://phaser.io/docs*/
/*http://phaser.io/examples*/
	var game = new Phaser.Game(800, 568, Phaser.AUTO, '', { preload: preload, create: create, update: update });
	var road; 
	var road2;
	var mainCar;
	var orangeCar;
	var redCar;
	var greenCar
	var purpleCar

	var menu;
	var star1;
	var star2;
	var star3;
	
	var carSpeed;
	var orangeSpeed;
	var redSpeed;
	var purpleSpeed;
	var greenSpeed;
	

	function preload() {
		//The following loads our images into memory. The function needs a string ID followed by the path to the image resource.
		game.load.image("playersCar","assets/whiteCar.png");
		
		game.load.image("orangeCar","assets/orangeCar.png");
		
		game.load.image("greenCar","assets/greenCar.png");
		
		game.load.image("purpleCar","assets/purpleCar.png");
		
		game.load.image("redCar","assets/redCar.png");
		
		game.load.image("road","assets/road.png");
		
		
		game.load.image("menu","assets/menu.png");
		
		game.load.image("star1","assets/star.png");
		
		game.load.image("star2","assets/star.png");
		
		game.load.image("star3","assets/star.png");
		
	}

// this function is used to initialize all variables: with their starting values
//We also initialize all variables storing sprites, sounds and fonts
	function create() {
	// The following function loads an image into a variable. Its parameters are the starting coordinates of the image on the game 
	//screen, followed by the image ID
	
		road=game.add.sprite(0,0,"road")
		road2=game.add.sprite(0,568,"road")
		purpleCar=game.add.sprite(10,0,"purpleCar")
		
		orangeCar=game.add.sprite(110,0,"orangeCar")
		
		greenCar=game.add.sprite(210,0,"greenCar")
		
		redCar=game.add.sprite(310,0,"redCar")
		
		mainCar=game.add.sprite(210,480,"playersCar")
		
		menu=game.add.sprite(400,0,"menu")
		
		star1=game.add.sprite(400,300,"star1")
		
		star2=game.add.sprite(500,300,"star2")
		
		star3=game.add.sprite(600,300,"star3")
		
		carSpeed = 0;
		redSpeed = 13;
		purpleSpeed = 11;
		greenSpeed = 9;
		orangeSpeed = 7;
		
		
		

	}

	// The following function is called for every frame of the game
	//	its here where we write the code that forms the basis of all the game actions
	function update() {
	//Code to manage the roads
    	road.y+=carSpeed;
		road2.y+=carSpeed;
		//Check to see when one road leaves the screen//and then move it behind the other road
		if(road.y >= 568)
		{
			road.y= road2.y-568;
		}
		else if(road2.y >=568)
		{
			road2.y = road.y - 568;
		}
		//Manage key presses during the game
		if (game.input.keyboard.isDown(Phaser.Keyboard.UP))
		{
			carSpeed++;
		}
		if (game.input.keyboard.isDown(Phaser.Keyboard.DOWN))
		{
			carSpeed--;
		}
		if (game.input.keyboard.isDown(Phaser.Keyboard.LEFT))
		{
			mainCar.x -= 5;
		}
		if (game.input.keyboard.isDown(Phaser.Keyboard.RIGHT))
		{
			mainCar.x += 5;
		}
		//Manage the cars speed
		if(carSpeed > 15)
		{
			carSpeed = 15
		}
		if(mainCar.x > 320)
		{
			mainCar.x = 320
		}
		if(mainCar.x < 1)
		{
			mainCar.x = 1
		}
		//Manage the other cars
		redCar.y -= redSpeed - carSpeed
		orangeCar.y -= orangeSpeed - carSpeed
		purpleCar.y -= purpleSpeed - carSpeed
		greenCar.y -= greenSpeed - carSpeed
		
	}

</script>